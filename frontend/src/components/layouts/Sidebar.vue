<template v-if="visibleMenu">
  <div class="sidebar">
    <div class="sidebar__wrapper">
      <h4 class="text">ПРОВЕРКИ</h4>
      <div
        class="pen"
        :class="{ active: button.href === currentPath }"
        v-for="button in sidebutton"
      >
        <div
          class="pen__heading"
          @click="
            () => {
              const currentProject = $route.query.project
              if (currentProject) {
                $router.push({path: button.href, query: {project: currentProject}});
              } else {
                $router.push({path: button.href, query: {project: 1}})
              }
                // currentPath = button.href;
            }
          "
        >
          <svg
            v-if="button.family == 'dashboard'"
            width="26"
            height="26"
            viewBox="0 0 26 26"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15.166 3.25C15.7407 3.25 16.2918 3.47827 16.6981 3.8846C17.1044 4.29093 17.3327 4.84203 17.3327 5.41667V8.66667H21.666C22.2407 8.66667 22.7918 8.89494 23.1981 9.30127C23.6044 9.7076 23.8327 10.2587 23.8327 10.8333V20.5833C23.8327 21.158 23.6044 21.7091 23.1981 22.1154C22.7918 22.5217 22.2407 22.75 21.666 22.75H4.33268C3.75805 22.75 3.20695 22.5217 2.80062 22.1154C2.39429 21.7091 2.16602 21.158 2.16602 20.5833V14.0833C2.16602 13.5087 2.39429 12.9576 2.80062 12.5513C3.20695 12.1449 3.75805 11.9167 4.33268 11.9167H8.66602V5.41667C8.66602 4.84203 8.89429 4.29093 9.30062 3.8846C9.70695 3.47827 10.258 3.25 10.8327 3.25H15.166ZM15.166 5.41667H10.8327V20.5833H15.166V5.41667ZM21.666 10.8333H17.3327V20.5833H21.666V10.8333ZM8.66602 14.0833H4.33268V20.5833H8.66602V14.0833Z"
              fill="black"
            />
          </svg>
          <svg
            v-if="button.family == 'tests'"
            width="26"
            height="26"
            viewBox="0 0 26 26"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20.5833 3.25C21.158 3.25 21.7091 3.47827 22.1154 3.8846C22.5217 4.29093 22.75 4.84203 22.75 5.41667V20.5833C22.75 21.158 22.5217 21.7091 22.1154 22.1154C21.7091 22.5217 21.158 22.75 20.5833 22.75H5.41667C4.84203 22.75 4.29093 22.5217 3.8846 22.1154C3.47827 21.7091 3.25 21.158 3.25 20.5833V5.41667C3.25 4.84203 3.47827 4.29093 3.8846 3.8846C4.29093 3.47827 4.84203 3.25 5.41667 3.25H20.5833ZM20.5833 9.75H5.41667V20.5833H20.5833V9.75ZM9.20833 16.25C9.49565 16.25 9.7712 16.3641 9.97437 16.5673C10.1775 16.7705 10.2917 17.046 10.2917 17.3333C10.2917 17.6207 10.1775 17.8962 9.97437 18.0994C9.7712 18.3025 9.49565 18.4167 9.20833 18.4167H8.125C7.83768 18.4167 7.56213 18.3025 7.35897 18.0994C7.1558 17.8962 7.04167 17.6207 7.04167 17.3333C7.04167 17.046 7.1558 16.7705 7.35897 16.5673C7.56213 16.3641 7.83768 16.25 8.125 16.25H9.20833ZM13.5417 16.25C13.8178 16.2503 14.0834 16.356 14.2842 16.5456C14.4849 16.7351 14.6058 16.9942 14.6219 17.2698C14.6381 17.5455 14.5484 17.8169 14.3712 18.0287C14.194 18.2404 13.9426 18.3765 13.6684 18.4091L13.5417 18.4167H12.4583C12.1822 18.4164 11.9166 18.3106 11.7159 18.1211C11.5151 17.9315 11.3942 17.6725 11.3781 17.3968C11.3619 17.1212 11.4516 16.8498 11.6288 16.638C11.806 16.4263 12.0574 16.2902 12.3316 16.2576L12.4583 16.25H13.5417ZM9.20833 11.9167C9.48445 11.917 9.75004 12.0227 9.95082 12.2123C10.1516 12.4018 10.2724 12.6609 10.2886 12.9365C10.3048 13.2122 10.2151 13.4836 10.0379 13.6953C9.86066 13.9071 9.60927 14.0431 9.33508 14.0758L9.20833 14.0833H8.125C7.84888 14.083 7.5833 13.9773 7.38252 13.7877C7.18174 13.5982 7.06091 13.3391 7.04473 13.0635C7.02855 12.7878 7.11823 12.5164 7.29545 12.3047C7.47268 12.0929 7.72406 11.9569 7.99825 11.9243L8.125 11.9167H9.20833ZM13.5417 11.9167C13.829 11.9167 14.1045 12.0308 14.3077 12.234C14.5109 12.4371 14.625 12.7127 14.625 13C14.625 13.2873 14.5109 13.5629 14.3077 13.766C14.1045 13.9692 13.829 14.0833 13.5417 14.0833H12.4583C12.171 14.0833 11.8955 13.9692 11.6923 13.766C11.4891 13.5629 11.375 13.2873 11.375 13C11.375 12.7127 11.4891 12.4371 11.6923 12.234C11.8955 12.0308 12.171 11.9167 12.4583 11.9167H13.5417ZM17.875 11.9167C18.1511 11.917 18.4167 12.0227 18.6175 12.2123C18.8183 12.4018 18.9391 12.6609 18.9553 12.9365C18.9715 13.2122 18.8818 13.4836 18.7045 13.6953C18.5273 13.9071 18.2759 14.0431 18.0018 14.0758L17.875 14.0833H16.7917C16.5155 14.083 16.25 13.9773 16.0492 13.7877C15.8484 13.5982 15.7276 13.3391 15.7114 13.0635C15.6952 12.7878 15.7849 12.5164 15.9621 12.3047C16.1393 12.0929 16.3907 11.9569 16.6649 11.9243L16.7917 11.9167H17.875ZM20.5833 5.41667H5.41667V7.58333H20.5833V5.41667Z"
              fill="black"
            />
          </svg>
          <p>{{ button.title }}</p>
        </div>
        <div class="pen__children" v-if="button.children">
          <ul>
            <li
              @click="
                () => {
                  $router.push(child.href);
                  // currentPath = child.href;
                }
              "
              v-for="child in button.children"
              :class="{ active: child.href === currentPath }"
            >
              <p>{{ child.title }}</p>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="sidebar__wrapper">
      <h4 class="text">АККАУНТ</h4>
      <button class="pen" @click="$router.push('/settings')">
        <div class="pen__heading">
          <svg
            width="36"
            height="36"
            viewBox="0 0 36 36"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M29.8503 18.9901C29.6099 18.7164 29.4772 18.3644 29.4772 18.0001C29.4772 17.6357 29.6099 17.2838 29.8503 17.0101L31.7703 14.8501C31.9819 14.6141 32.1133 14.3171 32.1456 14.0018C32.178 13.6866 32.1096 13.3691 31.9503 13.0951L28.9503 7.90509C28.7927 7.63137 28.5527 7.4144 28.2645 7.28512C27.9763 7.15583 27.6546 7.12082 27.3453 7.18509L24.5253 7.75509C24.1665 7.82923 23.793 7.76947 23.4752 7.58709C23.1574 7.4047 22.9173 7.11231 22.8003 6.76509L21.8853 4.02009C21.7847 3.72216 21.593 3.46338 21.3373 3.28035C21.0816 3.09732 20.7748 2.99928 20.4603 3.00009H14.4603C14.1332 2.98301 13.8095 3.07348 13.5387 3.25766C13.2678 3.44184 13.0647 3.70962 12.9603 4.02009L12.1203 6.76509C12.0033 7.11231 11.7633 7.4047 11.4455 7.58709C11.1277 7.76947 10.7542 7.82923 10.3953 7.75509L7.50033 7.18509C7.20716 7.14366 6.90828 7.18992 6.64135 7.31805C6.37442 7.44617 6.15138 7.65043 6.00033 7.90509L3.00033 13.0951C2.83707 13.3661 2.76367 13.6817 2.79061 13.9969C2.81755 14.3121 2.94346 14.6107 3.15033 14.8501L5.05533 17.0101C5.29581 17.2838 5.42843 17.6357 5.42843 18.0001C5.42843 18.3644 5.29581 18.7164 5.05533 18.9901L3.15033 21.1501C2.94346 21.3894 2.81755 21.688 2.79061 22.0033C2.76367 22.3185 2.83707 22.6341 3.00033 22.9051L6.00033 28.0951C6.15798 28.3688 6.39801 28.5858 6.68621 28.7151C6.97441 28.8443 7.29607 28.8793 7.60533 28.8151L10.4253 28.2451C10.7842 28.1709 11.1577 28.2307 11.4755 28.4131C11.7933 28.5955 12.0333 28.8879 12.1503 29.2351L13.0653 31.9801C13.1697 32.2906 13.3728 32.5583 13.6437 32.7425C13.9145 32.9267 14.2382 33.0172 14.5653 33.0001H20.5653C20.8798 33.0009 21.1866 32.9029 21.4423 32.7198C21.698 32.5368 21.8897 32.278 21.9903 31.9801L22.9053 29.2351C23.0223 28.8879 23.2624 28.5955 23.5802 28.4131C23.898 28.2307 24.2715 28.1709 24.6303 28.2451L27.4503 28.8151C27.7596 28.8793 28.0813 28.8443 28.3695 28.7151C28.6577 28.5858 28.8977 28.3688 29.0553 28.0951L32.0553 22.9051C32.2146 22.6311 32.283 22.3136 32.2506 21.9983C32.2183 21.683 32.0869 21.3861 31.8753 21.1501L29.8503 18.9901ZM27.6153 21.0001L28.8153 22.3501L26.8953 25.6801L25.1253 25.3201C24.045 25.0993 22.9212 25.2828 21.9672 25.8358C21.0133 26.3888 20.2955 27.2728 19.9503 28.3201L19.3803 30.0001H15.5403L15.0003 28.2901C14.6551 27.2428 13.9374 26.3588 12.9834 25.8058C12.0295 25.2528 10.9057 25.0693 9.82533 25.2901L8.05533 25.6501L6.10533 22.3351L7.30533 20.9851C8.04326 20.1601 8.45123 19.092 8.45123 17.9851C8.45123 16.8782 8.04326 15.8101 7.30533 14.9851L6.10533 13.6351L8.02533 10.3351L9.79533 10.6951C10.8757 10.9159 11.9995 10.7324 12.9534 10.1794C13.9074 9.62636 14.6251 8.74233 14.9703 7.69509L15.5403 6.00009H19.3803L19.9503 7.71009C20.2955 8.75732 21.0133 9.64136 21.9672 10.1944C22.9212 10.7474 24.045 10.9309 25.1253 10.7101L26.8953 10.3501L28.8153 13.6801L27.6153 15.0301C26.8857 15.8532 26.4828 16.9151 26.4828 18.0151C26.4828 19.1151 26.8857 20.1769 27.6153 21.0001ZM17.4603 12.0001C16.2736 12.0001 15.1136 12.352 14.1269 13.0113C13.1402 13.6706 12.3712 14.6076 11.9171 15.704C11.4629 16.8003 11.3441 18.0067 11.5756 19.1706C11.8071 20.3345 12.3786 21.4036 13.2177 22.2427C14.0568 23.0818 15.1259 23.6533 16.2898 23.8848C17.4537 24.1163 18.6601 23.9975 19.7564 23.5434C20.8528 23.0892 21.7899 22.3202 22.4492 21.3335C23.1084 20.3468 23.4603 19.1868 23.4603 18.0001C23.4603 16.4088 22.8282 14.8827 21.703 13.7574C20.5778 12.6322 19.0516 12.0001 17.4603 12.0001ZM17.4603 21.0001C16.867 21.0001 16.287 20.8241 15.7936 20.4945C15.3003 20.1649 14.9158 19.6963 14.6887 19.1481C14.4616 18.6 14.4022 17.9968 14.518 17.4148C14.6337 16.8329 14.9195 16.2983 15.339 15.8788C15.7586 15.4592 16.2931 15.1735 16.8751 15.0577C17.457 14.942 18.0602 15.0014 18.6084 15.2284C19.1566 15.4555 19.6251 15.84 19.9547 16.3334C20.2844 16.8267 20.4603 17.4067 20.4603 18.0001C20.4603 18.7957 20.1443 19.5588 19.5817 20.1214C19.019 20.684 18.256 21.0001 17.4603 21.0001Z"
              fill="black"
            />
          </svg>
          Настройки
        </div>
      </button>
      <button class="pen" @click="logOut()">
        <div class="pen__heading">
          <svg
            width="26"
            height="26"
            viewBox="0 0 26 26"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M13.0007 3.25C13.2768 3.25031 13.5424 3.35604 13.7431 3.54559C13.9439 3.73514 14.0647 3.9942 14.0809 4.26984C14.0971 4.54549 14.0074 4.81691 13.8302 5.02865C13.653 5.24039 13.4016 5.37647 13.1274 5.40908L13.0007 5.41667H7.58398C7.31864 5.4167 7.06254 5.51412 6.86425 5.69044C6.66596 5.86676 6.53928 6.10973 6.50823 6.37325L6.50065 6.5V19.5C6.50069 19.7653 6.5981 20.0214 6.77443 20.2197C6.95075 20.418 7.19371 20.5447 7.45723 20.5758L7.58398 20.5833H12.459C12.7351 20.5836 13.0007 20.6894 13.2015 20.8789C13.4022 21.0685 13.5231 21.3275 13.5393 21.6032C13.5554 21.8788 13.4658 22.1502 13.2885 22.362C13.1113 22.5737 12.8599 22.7098 12.5857 22.7424L12.459 22.75H7.58398C6.75501 22.75 5.95734 22.4333 5.3542 21.8646C4.75106 21.2959 4.38803 20.5182 4.3394 19.6907L4.33398 19.5V6.5C4.33394 5.67102 4.65067 4.87336 5.21937 4.27022C5.78808 3.66708 6.56577 3.30405 7.39332 3.25542L7.58398 3.25H13.0007ZM19.1832 9.16933L22.2469 12.2341C22.45 12.4372 22.5641 12.7127 22.5641 13C22.5641 13.2873 22.45 13.5628 22.2469 13.7659L19.1832 16.8307C18.98 17.0338 18.7043 17.1479 18.4169 17.1478C18.1296 17.1477 17.854 17.0334 17.6509 16.8301C17.4477 16.6268 17.3337 16.3512 17.3338 16.0638C17.3339 15.7764 17.4481 15.5009 17.6514 15.2978L18.8658 14.0833H13.0007C12.7133 14.0833 12.4378 13.9692 12.2346 13.766C12.0315 13.5629 11.9173 13.2873 11.9173 13C11.9173 12.7127 12.0315 12.4371 12.2346 12.234C12.4378 12.0308 12.7133 11.9167 13.0007 11.9167H18.8658L17.6514 10.7023C17.4481 10.4991 17.3339 10.2236 17.3338 9.93618C17.3337 9.6488 17.4477 9.37315 17.6509 9.16988C17.854 8.9666 18.1296 8.85234 18.4169 8.85224C18.7043 8.85214 18.98 8.9662 19.1832 9.16933Z"
              fill="black"
            />
          </svg>
          Выйти
        </div>
      </button>
    </div>
  </div>
</template>

<script>
import { mapState } from "vuex";
import { ref } from "vue";

export default {
  computed: {
    ...mapState({
      visibleMenu: (state) => state.visibleMenu,
    }),
    currentPath() {
      return this.$route.path;
    },
  },
  data() {
    return {
      // currentPath: "/",
      sidebutton: [
        {
          id: 1,
          title: "Дашборд",
          href: `/dashboard/`,
          family: "dashboard",
        },
        {
          id: 2,
          title: "Планы и отчёты",
          // href: "/tests/", //тут по базовому адресу будет история проверок
          family: "tests",
          children: [
            {
              id: 21,
              title: "Добавить отчёт",
              // href: "/tests/plan-test/",
              family: "tests",
            },
            // {
            //   id: 22,
            //   title: "Отчет о проверке",
            //   href: "/tests/add-report",
            //   family: "tests",
            // },
          ],
        },
        // {
        //   id: 3,
        //   title: "Что-нибудь ещё",
        // },
      ],
    };
  },
  methods: {
    logOut() {
      localStorage.removeItem('token')
      location.reload()
    }
  }
};
</script>

<style lang="scss" scoped>
.sidebar {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 250px;
  height: calc(100vh - 70px);
  background-color: rgb(255, 255, 255);
  padding: 25px 0;
  filter: drop-shadow(0 7px 4px rgba(0, 0, 0, 0.25));
}
.pen {
  background-color: transparent;
  border: none;
  width: 100%;
  height: max-content;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: start;
  padding-inline: 25px;
  font-size: 16px;
  &__heading {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 10px;
    height: 46px;
    svg{
      width: 26px;
      height: 26px;
    }
  }
  &__children ul {
    display: flex;
    flex-direction: column;
    // gap: 10px;
    list-style: none;
    padding-left: 25px;
    font-size: 14px;
    li {
      padding: 10px;
      border-top: 1px solid #f5f5f5;
      border-radius: 8px;
    }
    li:hover {
      p {
        color: #6490cf;
      }
    }
    li.active {
      background-color: rgba(65, 141, 255, 0.2);
      p {
        color: #418cff;
      }
    }
  }
  &.active {
    background-color: rgba(65, 141, 255, 0.2);
  }
  &.active &__heading {
    p {
      color: #418cff;
    }
    svg path {
      fill: #418cff;
    }
  }
  &:hover {
    background-color: rgba(173, 200, 239, 0.2);
    svg path {
      fill: #3d5e8b;
    }
    p {
      color: #3d5e8b;
    }
  }
  &:hover &__heading {
    color: #418cff;
  }
}

.text {
  padding-inline: 25px;
  color: rgba(150, 150, 150, 1);
  padding-bottom: 10px;
}
</style>
